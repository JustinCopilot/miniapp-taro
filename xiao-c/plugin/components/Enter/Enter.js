"use strict";require("../../runtime"),require("../../taro"),require("../../vendors"),require("../../common"),(wx["pluginWebpackJsonp"]=wx["pluginWebpackJsonp"]||[]).push([[355],{5219:function(n,e,o){o.d(e,{Z:function(){return g}});var t=o(6978),i=o(1479),u=o(7463),r=o.n(u),c=o(4537),a=o(6933),s=o(2168),l=function(n){return(0,s.Z)({method:"GET",url:"/v1/user/getMobileVerifyCode",params:n,options:{header:{Authorization:""}}})},d=function(n){return(0,s.Z)({method:"POST",url:"/v1/user/login",params:n,options:{header:{Authorization:""}}})},f=o(9645),v=o(2027),p=o(2336),m=o(5404),h=function(n){var e=n.env,o=void 0===e?f.rL.PROD:e,u=n.appType,s=void 0===u?null:u,h=n.mobile,g=void 0===h?null:h,C=n.onChangeStatu,b=n.requestAppUserCode,k=n.redirect,y=n.mode,E=void 0===y?"auto":y,q=n.onNavigate,A=n.onLisenReturn,R=n.children,S=(0,v.LP)(),T=!0,Z=(0,i.useState)(!T&&S),O=(0,t.Z)(Z,2),w=O[0],U=O[1],N=(0,c.Z)(a.gd,{manual:!0}),P=N.data,x=N.run,I=function(){var n;if(!w)return r().showToast({title:"AI\u7ec4\u4ef6\u521d\u59cb\u5316\u4e2d\uff0c\u8bf7\u7a0d\u540e",icon:"none"});if("chat"===(null===k||void 0===k?void 0:k.name)&&null!==k&&void 0!==k&&null!==(n=k.params)&&void 0!==n&&n.microAppUuid){var e,o="&params=".concat(encodeURIComponent(JSON.stringify(k.params)));null===q||void 0===q||q({url:"".concat(p.qk,"/chat/chat?microAppUuid=").concat(null===(e=k.params)||void 0===e?void 0:e.microAppUuid).concat(o),events:{Return:function(n){console.log("returnData",n),null===A||void 0===A||A(n)}},success:function(n){console.log("success",n.eventChannel),n.eventChannel.emit("Return",{data:"test"})}})}else null===q||void 0===q||q({url:"".concat(p.qk,"/list/list"),events:{Return:function(n){console.log("return",n)}},success:function(n){console.log("success",n.eventChannel),n.eventChannel.emit("Return",{data:"test"})}})};return(0,i.useEffect)((function(){!w&&"auto"===E&&b&&g&&s&&b().then((function(n){var e=n.code;e&&x({mobile:g,token:e,type:s})}))}),[b,E,g,s,w]),(0,i.useEffect)((function(){!w&&"mobileVerifyCode"===E&&g&&s&&l({mobile:g,type:s}).then((function(n){console.log(n),n&&d({mobile:g,type:s,code:n}).then((function(n){var e=n.accessToken;(0,v.o4)(e),U(!0)}))}))}),[E,g,s,w]),(0,i.useEffect)((function(){P&&((0,v.o4)(P.accessToken),U(!0))}),[P]),(0,i.useEffect)((function(){r().setStorageSync(f.Ig.HOST_ENV,o)}),[o]),(0,i.useEffect)((function(){C&&C(w?1:0)}),[w,C]),(0,m.jsxs)("view",{onClick:I,children:["Enter\u7ec4\u4ef6",R]})},g=h},2999:function(n,e,o){o(2644);var t,i=o(4836),u=o(1479),r=o(2992),c=o(5219).Z,a={isNewBlended:!0};Component((0,i._m)(c,t||(t=o.t(u,2)),r.ZP,a))}},function(n){var e=function(e){return n(n.s=e)};n.O(0,[107,216,592],(function(){return e(2999)}));n.O()}]);