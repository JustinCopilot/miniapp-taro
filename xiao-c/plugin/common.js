"use strict";(wx["pluginWebpackJsonp"]=wx["pluginWebpackJsonp"]||[]).push([[592],{2336:function(n,e,t){t.d(e,{K1:function(){return u},gn:function(){return a},qk:function(){return c}});var r=t(7463),o=t.n(r),u=o().getWindowInfo().statusBarHeight,i=(o().getMenuButtonBoundingClientRect(),"/xiao-c"),c="".concat(i,"/plugin/pages"),a="".concat(i,"/sub-edu/pages");"".concat(i,"/sub-beauty/pages")},2168:function(n,e,t){t.d(e,{S:function(){return p}});var r=t(1949),o=t(2531),u=t(7463),i=t.n(u),c=t(9645),a=t(2027),s=t(9878),f=t(9800),d="----WebKitFormBoundaryX2UFH67x5M0xltNB",l={json:"application/json; charset=utf-8",urlencoded:"application/x-www-form-urlencoded; charset=utf-8",multipart:"multipart/form-data; boundary=".concat(d)},m={timeout:6e4,credentials:"include",dataType:"json"},E=(0,o.Z)((0,o.Z)({},c.rL.ITEST,"https://itest.clife.net/assistant"),c.rL.PROD,"https://cms.clife.cn/assistant"),p=function(n){var e="";if(null!==n&&void 0!==n&&n.startsWith("https://"))e="";else{var t=i().getStorageSync(c.Ig.HOST_ENV)||c.rL.PROD;e=E[t]}return e},h=0,T=function(n){var e,t=n.url,o=n.method,c=n.params,d=n.options,E=void 0===d?{}:d,T=n.contentType,g=void 0===T?"json":T,v=n.showLoading,_=void 0===v||v,S=n.usePostUrlParams;if(!t){var x=new Error("\u8bf7\u4f20\u5165url");return Promise.reject(x)}console.log("url:",t),_&&(h++,i().showLoading({title:"\u52a0\u8f7d\u4e2d",mask:!0}));var O="".concat(p()).concat(t);if(S&&c){var L=(0,s.h)(c);O=O+"?"+L}var N=(0,a.LP)(),I=(0,r.Z)((0,r.Z)((0,r.Z)({},m),{},{header:(0,r.Z)({Accept:"application/json","Content-Type":(null===(e=E.header)||void 0===e?void 0:e["Content-Type"])||l[g],"X-Requested-With":"XMLHttpRequest",Authorization:N},E.header)},E),{},{data:S?{}:c,method:o});return(0,u.request)((0,r.Z)({url:O},I)).then((function(n){console.log("response==",n);var e=n.data,t=e||{},r=t.code,o=t.msg;return 0!==r?(i().showToast({title:o||"\u7f51\u7edc\u5f02\u5e38",icon:"error",duration:2e3}),401!==r||(0,f.H0)()||setTimeout((function(){i().navigateTo({url:"/pages/index/index"})}),2e3),Promise.reject(e.msg)):Promise.resolve(e.data)})).catch((function(n){return Promise.reject(n)})).finally((function(){_&&h>0&&(h--,i().hideLoading())}))};e["Z"]=T},9800:function(n,e,t){t.d(e,{AU:function(){return c},DO:function(){return i},H0:function(){return s},R0:function(){return a}});var r=t(7463),o=t.n(r),u=t(9645);function i(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var e=16*Math.random()|0,t="x"===n?e:3&e|8;return t.toString(16)}))}var c=function(n){return!!n&&!["null","[]","[null]"].includes(n)},a=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=o().getCurrentPages(),t=e[e.length-1+n];return t},s=function(){return o().getStorageSync(u.Ig.HOST_ENV)===u.rL.PROD}},9878:function(n,e,t){function r(n){return Object.entries(n).map((function(n){return n.join("=")})).join("&")}t.d(e,{h:function(){return r}})},2027:function(n,e,t){t.d(e,{LP:function(){return i},o4:function(){return c}});var r=t(9645),o=t(7463),u=t.n(o),i=function(){return u().getStorageSync(r.Ig.TOKEN)||""},c=function(n){u().setStorageSync(r.Ig.TOKEN,n)}},2525:function(n,e,t){var r=t(8190),o=t(1479),u=t(5404),i=(0,o.memo)((function(n){var e=n.children;return(0,u.jsx)(r.G7,{className:"bottom-operator",children:e})}));e["Z"]=i},5629:function(n,e,t){t.d(e,{F:function(){return E}});var r=t(1949),o=t(6603),u=t(6978),i=t(8190),c=t(7463),a=t.n(c),s=t(1479),f=t(9645),d=t(2336),l=t(2525),m=t(5404),E=function(n){return n[n["RESULT_POP"]=0]="RESULT_POP",n[n["VIEW_ALL"]=1]="VIEW_ALL",n[n["SELECT"]=2]="SELECT",n}({}),p=9,h=function(n){var e=n.imageArray,t=n.renderType,c=n.maxShow,h=void 0===c?9:c,T=n.wrapperClass,g=void 0===T?"":T,v=n.callback,_=(0,s.useState)([]),S=(0,u.Z)(_,2),x=S[0],O=S[1],L=(0,s.useState)(!1),N=(0,u.Z)(L,2),I=N[0],P=N[1],A=(0,s.useState)(0),U=(0,u.Z)(A,2),D=U[0],k=U[1],R=t===E.SELECT,C=e.length-h,j=t===E.RESULT_POP?"result-pop":"",b=(0,s.useMemo)((function(){return x.filter((function(n){return n.isCheck}))}),[x]),G=b.length,w=function(n,r){switch(t){case E.RESULT_POP:if(C>0&&r===x.length-1)return a().setStorageSync(f.Ig.EDU_CHOOSE_IMG_LIST,e),void a().navigateTo({url:"".concat(d.qk,"/img_list/img_list?renderType=").concat(E.VIEW_ALL)});a().previewImage({current:n.url,urls:x.map((function(n){return n.url}))});break;case E.VIEW_ALL:a().previewImage({current:n.url,urls:x.map((function(n){return n.url}))});break;case E.SELECT:k(r),P(!0);break}},Z=function(){console.log("\u9009\u4e2d\u7684\u56fe\u7247",b),H(),v&&v(b)},y=function(n,e){n.stopPropagation();var t=x[e];G>=p&&!t.isCheck||(t.isCheck=!t.isCheck,O((0,o.Z)(x)))},H=function(){P(!1)};return(0,s.useEffect)((function(){var n=null===e||void 0===e?void 0:e.map((function(n,e){return{url:n,id:e}}));switch(t){case E.RESULT_POP:O(n.slice(0,h));break;case E.VIEW_ALL:O(n);break;case E.SELECT:O(n.map((function(n){return(0,r.Z)({isCheck:!1},n)})));break;default:}}),[t,h,e]),(0,m.jsxs)(i.G7,{className:"image-wrapper ".concat(j," ").concat(g),children:[(0,m.jsx)(i.G7,{className:"image-content",children:x.map((function(n,e){return(0,m.jsx)(i.G7,{onClick:function(){return w(n,e)},className:"radio-item-container",children:(0,m.jsxs)(i.G7,{className:"radio-item",children:[(0,m.jsx)(i.Ee,{src:n.url,mode:"aspectFill",className:"radio-item-img ".concat(t!==E.RESULT_POP?"radio-item-unresult":"")}),R&&(0,m.jsxs)(i.G7,{className:"radio-item-operator",children:[(0,m.jsx)(i.G7,{className:"radio check ".concat(n.isCheck?"check-isCheck":""),onClick:function(n){return y(n,e)}}),n.isCheck||G===p?(0,m.jsx)(i.G7,{className:"radio-item-mask radio-item-operator-mask"}):null]}),t===E.RESULT_POP&&C>0&&e===h-1&&(0,m.jsx)(i.G7,{className:"radio-item-rest",children:(0,m.jsxs)(i.xv,{className:"text",children:["+",C]})})]})},e)}))}),I&&(0,m.jsxs)(i.G7,{className:"previewModal",onClick:H,children:[(0,m.jsxs)(i.G7,{className:"header",children:[(0,m.jsx)(i.G7,{}),(0,m.jsx)(i.G7,{className:"check ".concat(x[D].isCheck?"check-isCheck":""),onClick:function(n){return y(n,D)}})]}),(0,m.jsx)(i.G7,{className:"img-content",children:(0,m.jsx)(i.tq,{className:"img-swiper",current:D,onChange:function(n){k(n.detail.current)},children:x.map((function(n,e){return(0,m.jsx)(i.t3,{className:"img-swiper-item",children:(0,m.jsx)(i.Ee,{mode:"widthFix",src:n.url,className:"show-img"})},e)}))})})]}),R&&(0,m.jsx)(l.Z,{children:(0,m.jsxs)(i.zx,{onClick:Z,disabled:!G,type:"primary",className:"next-step",hoverClass:"none",children:["\u4e0b\u4e00\u6b65\uff08","".concat(G,"/").concat(p),"\uff09"]})})]})};e["Z"]=h},9169:function(n,e,t){var r=t(6838),o=function(n){var e=n===r.Gv.EDU_KNOWLEDGE,t=n===r.Gv.EDU_PHOTO,o=n===r.Gv.BEAUTY_SUMMARY,u=n===r.Gv.EDU_BEHAVIOR;return{isEduKnowledgeScenes:e,isEduPhotoScenes:t,isBeautySummaryScenes:o,isEduBehaviorScenes:u}};e["Z"]=o},9981:function(n,e,t){var r=t(1479),o=t(7463),u=t.n(o),i=t(4537),c=t(6933),a=t(2027),s=t(9645),f=function(){var n=(0,o.useRouter)(),e=(0,i.Z)(c.gd,{manual:!0}),t=e.data,f=e.run;return(0,r.useEffect)((function(){var e=n.params,t=e.token,r=e.type,o=e.mobile,i=e.env,c=e.mockFlag;t&&r&&o&&i?(u().setStorageSync(s.Ig.HOST_ENV,i),c?(0,a.o4)(t):f({type:Number(r),mobile:o,token:t})):u().showToast({title:"\u7f3a\u5c11\u5fc5\u4f20\u5b57\u6bb5",icon:"error",duration:2e3})}),[n]),(0,r.useEffect)((function(){t&&(0,a.o4)(t.accessToken)}),[t]),{aiToken:t}};e["Z"]=f},6171:function(n,e,t){t.d(e,{$4:function(){return i},Be:function(){return m},LL:function(){return s},Ls:function(){return a},Qv:function(){return l},VR:function(){return d},Xv:function(){return c},jf:function(){return f},u3:function(){return u},w0:function(){return o}});var r=t(2168),o=function(){return(0,r.Z)({method:"GET",url:"/v1/microApp/applet/list"})},u=function(n){return(0,r.Z)({method:"GET",url:"/v1/microApp/getHistoryChat",params:n})},i=function(n){return(0,r.Z)({method:"GET",url:"/v1/microApp/preset",params:n})},c=function(n){return(0,r.Z)({method:"POST",url:"/v1/microApp/feedback",params:n,showLoading:!1})},a=function(n){return(0,r.Z)({method:"POST",url:"/v1/microApp/reset",params:n,usePostUrlParams:!0})},s=function(){return(0,r.Z)({method:"GET",url:"/v1/resource/edu/photo/model"})},f=function(n){return(0,r.Z)({method:"POST",url:"/v1/edu/photos/createShareId",params:n})},d=function(n){return(0,r.Z)({method:"GET",url:"/v1/photos/shareId/".concat(n.id)})},l=function(n){return(0,r.Z)({method:"POST",url:"/v1/microApp/interruptSession",params:n,showLoading:!1})},m=function(n){return(0,r.Z)({method:"POST",url:"/v1/microApp/tag",params:n,showLoading:!1})}},6838:function(n,e,t){t.d(e,{Fc:function(){return a},Gv:function(){return r},Lu:function(){return s},Pz:function(){return i},Z0:function(){return o},b5:function(){return u},oi:function(){return c}});var r=function(n){return n["EDU_KNOWLEDGE"]="1483c593-f9e4-44a6-8f4d-79c8739b4394",n["EDU_PHOTO"]="f792c2cb-d14e-4eaa-aa82-4e09cb518844",n["BEAUTY_SUMMARY"]="1e6662e2-8174-4bea-9991-0c4dce21f643",n["EDU_BEHAVIOR"]="d895dd7c-c736-4a15-a33f-5e8f0c2df180",n["EDU_JOT_DOWN"]="c334ffe6-1ced-47fb-ba93-63248a003ce8",n["EDU_OBSERVATION"]="d966b5d2-3cc8-4545-9be8-01416f77414c",n}({}),o=function(n){return n[n["User"]=1]="User",n[n["Ai"]=2]="Ai",n[n["Image"]=3]="Image",n}({}),u=function(n){return n["VIDEO"]="video",n["POSTER"]="poster",n["SYSTEM_TXT"]="system_txt",n}({}),i=function(n){return n[n["REFRESH"]=2]="REFRESH",n[n["EDIT"]=3]="EDIT",n}({}),c=function(n){return n["DISTRIBUTE"]="distribution",n["VIDEO"]="generate_video",n["POSTER"]="generate_image",n["SHARE"]="share_photos",n["NEED"]="need",n["UNNEED"]="unneed",n["MOBILE"]="mobile",n["WECHAT"]="wechat",n["NOT_CONTACTED"]="not_contacted",n}({}),a=function(n){return n[n["GOOD"]=0]="GOOD",n[n["BAD"]=1]="BAD",n[n["UNSAFE"]=2]="UNSAFE",n[n["FRAUDULENTLY"]=3]="FRAUDULENTLY",n[n["UNHELP"]=4]="UNHELP",n[n["OTHER"]=5]="OTHER",n}({}),s=function(n){return n["EDU_INFORMATION_SUPPLEMENTED"]="edu_information_supplemented",n["EDU_INFORMATION_SUPPLEMENT_DATA"]="edu_information_supplement_data",n}({})},2851:function(n,e,t){t.d(e,{g:function(){return o},i:function(){return u}});var r=t(2168),o=function(n){return(0,r.Z)({method:"POST",url:"/v1/token/turn",params:n,options:{header:{Authorization:""}}})},u=function(n){return(0,r.Z)({method:"GET",url:"/v1/resource/edu/cos",params:n})}},6933:function(n,e,t){t.d(e,{$4:function(){return r.$4},Ls:function(){return r.Ls},Qv:function(){return r.Qv},VR:function(){return r.VR},Xv:function(){return r.Xv},gd:function(){return o.g},jf:function(){return r.jf},u3:function(){return r.u3},w0:function(){return r.w0}});var r=t(6171),o=t(2851)},9645:function(n,e,t){t.d(e,{Ig:function(){return r},rL:function(){return o},w6:function(){return u}});var r=function(n){return n["TOKEN"]="xiaoc_token",n["HOST_ENV"]="xiaoc_env",n["EDU_CHOOSE_IMG_LIST"]="edu_choose_img_list",n["EDU_FRAME_IMG_LIST"]="edu_frame_img_list",n["EDU_SYNTHESIS_IMG_LIST"]="edu_synthesis_img_list",n["EDU_SELECTED_CHILD_DATA"]="edu_selected_child_data",n}({}),o=function(n){return n["ITEST"]="itest",n["PROD"]="prod",n}({}),u=function(n){return n["CHAT_EXTENSION"]="chat_extension",n["EDIT_OBSERVATION"]="edit_observation",n}({})}}]);